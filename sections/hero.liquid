<link rel="stylesheet" href="{{ "hero.css" | asset_url }}">

<div class="hero_slider__wrap">
    <div class="swiper hero_slider__swiper js-hero-slider">    
        <div class="swiper-wrapper hero_slider__swiper_wrap">
            {% if section.blocks.size > 0 %}
                {% for block in section.blocks %}
                    <div data-swiper-autoplay={{ section.settings.slider_autoplay_speed | times: 1000 }} class="swiper-slide hero_slider__item hero_slider__item--{{ forloop.index }}">
                        <style>
                            .hero_slider__item--{{ forloop.index }} .hero_slider__picture:after {
                                background-color: {{ block.settings.overlay_color }};
                                opacity: {{ block.settings.overlay_opacity | times: 0.01 }};
                            } 
                            
                            .hero_slider__item--{{ forloop.index }} .hero_slider__description {
                                max-width: {{ block.settings.description_width }}px;
                            }   
                        </style>

                        {% if block.settings.btn_url != blank %}
                            <a href="{{ block.settings.btn_url }}" class="hero_slider__picture_link">                            
                        {% endif %}
                        
                        <picture class="hero_slider__picture">
                            {% if block.settings.image_mob != blank %}
                                {% assign classImg = 'hero_slider__img--desktop' %}
                            {% else %}
                                {% assign classImg = '' %}                                    
                            {% endif %}
                            {% if block.settings.image != blank %}
                                <img
                                    width="100%"
                                    height="100%"
                                    src="{{ block.settings.image |  image_url }}"
                                    alt="{{ block.settings.title }}"
                                    class="hero_slider__img {{ classImg }}"
                                >

                                {% if block.settings.image_mob != blank %}
                                    <img
                                        width="100%"
                                        height="100%"
                                        src="{{ block.settings.image_mob |  image_url }}"
                                        alt="{{ block.settings.title }}"
                                        class="hero_slider__img hero_slider__img--mobile"
                                    >
                                {% endif %}
                            {% else %}                               
                                {{ 'image' | placeholder_svg_tag: 'placeholder-svg placeholder-svg--cover' }}
                            {% endif %}                            
                        </picture>

                        {% if block.settings.btn_url != blank %}
                            </a>                            
                        {% endif %}

                        <div class="hero_slider__content_wrap">
                            <div class="hero_slider__content page_width">
                                {% if block.settings.content_color %}
                                    <style>
                                        .hero_slider__item--{{ forloop.index }} .hero_slider__content {
                                            color: {{ block.settings.content_color }};
                                        }
                                    </style>
                                {% endif %}

                                {% if block.settings.content_color %}
                                    <style>
                                        .hero_slider__item--{{ forloop.index }} .hero_slider__btn {
                                            background-color: {{ block.settings.btn_color }};
                                        }
                                    </style>
                                {% endif %}

                                {% if block.settings.title != blank %}
                                    {% if forloop.index == 1 %}
                                        <h1 class="hero_slider__title">{{ block.settings.title }}</h1>                        
                                    {% else %}
                                        <h2 class="hero_slider__title">{{ block.settings.title }}</h2>
                                    {% endif %}
                                {% endif %}
            
                                {% if block.settings.description != blank %}
                                    <div class="hero_slider__description">{{ block.settings.description }}</div>                        
                                {% endif %}
            
                                {% if block.settings.btn_title != blank %}
                                    <div class="hero_slider__btn_wrap">
                                        <a href="{{ block.settings.btn_url }}" class="btn_base">{{ block.settings.btn_title }}</a>                                                                                                 
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
        
        <div class="hero_slider__swiper_controls">
            <button type="button" class="hero_slider__swiper_control hero_slider__swiper_prev js-hero-slider-prev">
                {% render 'icons', filename: 'arrow-left' class: 'hero_slider__swiper_control_icon' %}
            </button>
            <div class="swiper-pagination hero_slider__swiper_pagination js-hero-slider-pagination"></div>
            <button type="button" class="hero_slider__swiper_control hero_slider__swiper_next js-hero-slider-next">
                {% render 'icons', filename: 'arrow-right' class: 'hero_slider__swiper_control_icon' %}
            </button>              
        </div>
    </div>    
</div>

<script type="module" src="{{ "hero.js" | asset_url }}"></script>

{% schema %}
    {
        "name": "Hero slider",
        "tag": "section",
        "class": "hero_slider",
        "settings": [
            {
                "type": "range",
                "id": "slider_autoplay_speed",
                "min": 0,
                "max": 10,
                "step": 1,
                "unit": "sec",
                "label": "Autoplay speed",
                "default": 3
            }
        ],
        "blocks": [
            {
                "name": "slide",
                "type": "slide",
                "settings": [
                    {
                        "type": "image_picker",
                        "id": "image",
                        "label": "Image"
                    },
                    {
                        "type": "image_picker",
                        "id": "image_mob",
                        "label": "Image for mobile"
                    },
                    {
                        "type": "text",
                        "id": "title",
                        "label": "Title",
                        "default": "Titile"
                    },
                    {
                        "type": "richtext",
                        "id": "description",
                        "label": "Description",
                        "default": "<p>Description</p>"
                    },
                    {
                        "type": "text",
                        "id": "btn_title",
                        "label": "Button title",
                        "default": "Shop"
                    },
                    {
                        "type": "url",
                        "id": "btn_url",
                        "label": "Button link"                        
                    },
                    {
                        "type": "header",
                        "content": "Style"
                    },
                    {
                        "type": "color",
                        "id": "content_color",
                        "label": "Content color"                        
                    },
                    {
                        "type": "color",
                        "id": "btn_color",
                        "label": "Button color"                        
                    },
                    {
                        "type": "color",
                        "id": "overlay_color",
                        "label": "Overlay color"                        
                    },
                    {
                        "type": "range",
                        "min": 0,
                        "max": 100,
                        "step": 1,
                        "id": "overlay_opacity",
                        "label": "Overlay opacity",
                        "default": 50
                    },
                    {
                        "type": "range",
                        "min": 300,
                        "max": 700,
                        "step": 10,
                        "id": "description_width",
                        "label": "Description width",
                        "default": 510
                    }
                ]
            }
        ],
        "presets": [
            {
                "name": "Hero slider",
                "blocks": [
                {
                    "type": "slide"
                }
            ]
            }
        ]
    }
{% endschema %}